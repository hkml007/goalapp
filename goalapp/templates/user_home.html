{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <title>Coffee Aesthetic Template - User Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,900" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{% static 'user/css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'user/css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'user/css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'user/fonts/ionicons/css/ionicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'user/fonts/fontawesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'user/fonts/flaticon/font/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'user/css/style.css' %}">

    <style>
      /* Coffee Theme Overrides */
  /* Coffee Theme Overrides */
  body {
    background-color: #7f7171; /* white background */
  }
  header .navbar{
        background-color: #594444 !important;

  }
  .navbar {
    background-color: #594444 !important;
  }
  .navbar-nav .nav-link,
  .navbar .dropdown-item {
    color: #FAF3E0 !important;
  }
  

      .navbar .dropdown-menu {
        background-color: #4B2E2B;
      }
      .navbar .dropdown-item:hover {
        background-color: #2E1A17;
        color: #C19A6B !important;
      }
      .btn-primary {
        background-color: #C19A6B;
        border-color: #C19A6B;
        color: #2E1A17;
      }
      .btn-primary:hover {
        background-color: #A47551;
        border-color: #A47551;
      }
      .site-footer {
        background-color: #4B2E2B;
        color: #f5f5dc;
      }
      .site-footer a {
        color: #f5f5dc;
      }
      .site-footer h3 {
        color: #ffe0b2;
      }

      /* Notification Modal and Dropdown Styles */
      .modal-content {
        background-color: #2E1A17;
        color: #FAF3E0;
      }
      .modal-content.goal { border-left: 4px solid #C19A6B; }
      .modal-content.milestone { border-left: 4px solid #A47551; }
      .modal-content.todo { border-left: 4px solid #D4A373; }
      .modal-content.habit { border-left: 4px solid #E8C07D; }
      .modal-content.upcoming_goal { border-left: 4px solid #F5E8C7; }
      .notification-dropdown {
        max-height: 300px;
        overflow-y: auto;
      }
      .notification-dropdown .dropdown-item {
        background-color: #2E1A17;
        color: #FAF3E0;
        padding: 5px 10px;
      }
      .notification-dropdown .dropdown-item:hover {
        background-color: #1A0F0D;
        color: #C19A6B;
      }
      .dismiss-btn {
        background-color: #C19A6B;
        border: none;
        padding: 2px 8px;
        border-radius: 3px;
        cursor: pointer;
        color: #2E1A17;
        margin-left: 5px;
      }
      .dismiss-btn:hover {
        background-color: #A47551;
      }
    </style>
  </head>

  <body>

<header role="banner">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample05">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExample05">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item"><a class="nav-link active" href="{{ habit_tracker_url }}">Habit Tracker</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown04" data-bs-toggle="dropdown">Challenge</a>
            <div class="dropdown-menu" aria-labelledby="dropdown04">
              <a class="dropdown-item" href="../challenges/">Challenge Board</a>
              <a class="dropdown-item" href="../daily-checkin/">Daily Check-in Bonus</a>
              <a class="dropdown-item" href="../progress-tracking/">Progress</a>
              <a class="dropdown-item" href="../recommendations/">Recommendations</a>
              <a class="dropdown-item" href="../mbti_test/">MBTI Test</a>
              <a class="dropdown-item" href="../mbti_result/">MBTI Result</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="dropdown05" data-bs-toggle="dropdown">Categories</a>
            <div class="dropdown-menu" aria-labelledby="dropdown05">
              <a class="dropdown-item" href="../diary_hub/">Diary</a>
              <a class="dropdown-item" href="../reminder/">Reminder</a>
              <a class="dropdown-item" href="{% url 'todo_list' %}">To-Do List</a>
              <a class="dropdown-item" href="../leaderboard/">Leaderboard</a>
              <a class="dropdown-item" href="../todo_search/">Todo Search</a>
              <a class="dropdown-item" href="../notifications/">Notification</a>
            </div>
          </li>
          <li class="nav-item"><a class="nav-link" href="../goal_tracker/">Goal Tracker</a></li>
          <li class="nav-item"><a class="nav-link" href="../userprofile/">Edit Profile</a></li>
          <li class="nav-item"><a class="nav-link" href="../calendar_view/">Calendar</a></li>
        </ul>
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="notificationDropdown" data-bs-toggle="dropdown">
              Notifications {% if notifications %}({{ notifications|length }}){% endif %}
            </a>
            <div class="dropdown-menu notification-dropdown" aria-labelledby="notificationDropdown">
              {% for note in notifications %}
                <a class="dropdown-item" href="{{ note.link }}">{{ note.message }}</a>
              {% endfor %}
            </div>
          </li>
          <li class="nav-item"><a href="../logout" class="nav-link">Logout</a></li>
          <!-- <li class="nav-item"><a href="register.html" class="nav-link">Register</a></li> -->
        </ul>
      </div>
    </div>
  </nav>
</header>

<!-- Notification Modals -->
{% for note in notifications %}
<div class="modal fade{% if forloop.first %} show{% endif %}" id="modal{{ forloop.counter }}" tabindex="-1" aria-hidden="true"{% if forloop.first %} style="display: block;"{% endif %}>
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content border border-2 {{ note.type }}">
      <div class="modal-header">
        <h5 class="modal-title text-capitalize">{{ note.type|title }}</h5>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
      </div>
      <div class="modal-body">
        <p>{{ note.message }}</p>
        <a href="{{ note.link }}" class="btn btn-sm btn-primary">Open</a>
        <form method="post" action="{% url 'dismiss_notification' %}" style="display:inline;">
          {% csrf_token %}
          <!-- <input type="hidden" name="notification_id" value="{{ note.id }}">
          <button type="submit" class="btn btn-link btn-sm text-danger">Dismiss</button> -->
        </form>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<!-- Auto-close Script -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const modals = document.querySelectorAll('.modal');

    function showModalsSequentially(index = 0) {
      if (index >= modals.length) return;

      const currentModal = modals[index];
      $(currentModal).modal('show');

      setTimeout(() => {
        $(currentModal).modal('hide');
        showModalsSequentially(index + 1);
      }, 5000); // Show each for 5 seconds
    }

    if (modals.length > 0) {
      showModalsSequentially();
    }
  });
</script>

<!-- Hero Section -->
<!-- <section class="site-hero overlay text-white text-center" data-stellar-background-ratio="0.5"
         style="background-image: url(images/big_image_1.jpg); background-color: rgba(75, 46, 43, 0.75); background-blend-mode: overlay; padding: 100px 0;"> -->

        <!-- If you want image but no dark overlay -->
<!-- <section class="site-hero text-white text-center" style="background-image: url(images/big_image_1.jpg); background-size: cover; padding: 100px 0;"> -->
 <section class="site-hero text-white text-center" style="background-image: url('{% static "user/images/gl.jpg" %}'); background-size: cover; padding: 100px 0;">

  <div class="container">
    <div class="row align-items-center justify-content-center">
      <!-- <div class="col-md-8">
        <h1 class="mb-4">Learn From Doing</h1>
        <p class="lead mb-4">Learn something new every day with Skwela lorem ipsum dolor sit amet.</p>
        <a href="#" class="btn btn-primary">Sign up and get a 7-day free trial</a>
      </div> -->
    </div>
  </div>
</section>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-4">
            <!-- <h3>About</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p> -->
          </div>
          <div class="col-md-6 ml-auto">
            <div class="row">
              {% for i in "123" %}
              <div class="col-md-4">
                <ul class="list-unstyled">
                  <!-- <li><a href="#">About Us</a></li>
                  <li><a href="#">Company</a></li>
                  <li><a href="#">Teachers</a></li>
                  <li><a href="#">Courses</a></li>
                  <li><a href="#">Categories</a></li>
                </ul> -->
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Loader -->
    <div id="loader" class="show fullscreen">
      <svg class="circular" width="48px" height="48px">
        <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
        <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#f4b214" />
      </svg>
    </div>

    <!-- Scripts -->
    <script src="{% static 'user/js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'user/js/jquery-migrate-3.0.0.js' %}"></script>
    <script src="{% static 'user/js/popper.min.js' %}"></script>
    <script src="{% static 'user/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'user/js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'user/js/jquery.waypoints.min.js' %}"></script>
    <script src="{% static 'user/js/jquery.stellar.min.js' %}"></script>
    <script src="{% static 'user/js/main.js' %}"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
          const modals = document.querySelectorAll('.modal');
          modals.forEach((modal, index) => {
              setTimeout(() => {
                  $(modal).modal('hide'); // Use jQuery to hide modals
              }, 5000 * (index + 1)); // stagger the modals
          });

          // Auto-show first modal if notifications exist
          if (modals.length > 0) {
              $(modals[0]).modal('show');
          }
      });
    </script>
  </body>
</html>